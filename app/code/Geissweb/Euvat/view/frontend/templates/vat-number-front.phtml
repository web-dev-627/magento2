<?php
/**
 * ||GEISSWEB| EU VAT Enhanced
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the GEISSWEB End User License Agreement
 * that is available through the world-wide-web at this URL: https://www.geissweb.de/legal-information/eula
 *
 * DISCLAIMER
 *
 * Do not edit this file if you wish to update the extension in the future. If you wish to customize the extension
 * for your needs please refer to our support for more information.
 *
 * @copyright   Copyright (c) 2015 GEISS WeblÃ¶sungen (https://www.geissweb.de)
 * @license     https://www.geissweb.de/legal-information/eula GEISSWEB End User License Agreement
 */

/**@var $block \Geissweb\Euvat\Block\Vatfield */
?>

<?php if ($block->getConfigHelper()->isValidationEnabled()): ?>
    <div data-bind="scope: 'vat-id-input'" id="vat_number_container" class="field fields">
        <!-- ko template: getTemplate() --><!-- /ko -->
    </div>

    <script type="text/x-magento-init">
    {
        "#vat_number_container": {
            "Magento_Ui/js/core/app": {
                "components": {
                    "vat-id-input":{
                        "component":"uiComponent",
                        "children": {
                            "vat_id": {
                                "component": "Geissweb_Euvat/js/form/element/vat-number-front",
                                <?php // phpcs:disable Magento2.Security.XssTemplate.FoundUnescaped?>
                                "config": <?= json_encode($block->getConfigHelper()->getVatFieldConfig())?>,
                                "validation_registration":<?= json_encode($block->getConfigHelper()
                                                                                ->getFieldValidationAtRegistration())?>,
                                "validation_addressedit": <?= json_encode($block->getConfigHelper()
                                                                                ->getFieldValidationAtAddressEdit())?>
                                <?php // phpcs:enable Magento2.Security.XssTemplate.FoundUnescaped?>
                            }
                        }
                    }
                }
            }

        }
    }
    </script>

<?php endif;?>
